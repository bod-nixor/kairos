<?php
declare(strict_types=1); require_once dirname(__DIR__,2) . '/_common.php'; lms_require_roles(['manager','admin']); $in=lms_json_input(); $id=(int)($in['question_id']??0); if($id<=0){lms_error('validation_error','question_id required',422);} db()->prepare('UPDATE lms_questions SET prompt=:p, question_type=:t, points=:pts, answer_key_json=:ans, settings_json=:set, updated_at=CURRENT_TIMESTAMP WHERE question_id=:id')->execute([':p'=>$in['prompt']??'',':t'=>$in['question_type']??'short_answer',':pts'=>(float)($in['points']??1),':ans'=>isset($in['answer_key'])?json_encode($in['answer_key']):null,':set'=>isset($in['settings'])?json_encode($in['settings']):null,':id'=>$id]); lms_ok(['updated'=>true]);
