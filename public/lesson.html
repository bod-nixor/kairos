<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <title>Lesson — Kairos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./css/style.css" />
  <link rel="stylesheet" href="./css/lms.css" />
  <script src="./js/config.js"></script>
</head>
<body class="k-page-body">
  <div class="k-layout" style="padding:24px;max-width:1000px;margin:0 auto">
    <div class="k-page-header">
      <div>
        <h1 class="k-page-header__title" id="lessonTitle">Lesson</h1>
        <p class="k-page-header__subtitle" id="lessonSubtitle"></p>
      </div>
      <div class="k-page-header__actions" style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
        <span id="lessonStatusPill" class="k-chip">Draft</span>
        <button class="btn btn-ghost btn-sm hidden" id="viewModeBtn" type="button">View</button>
        <button class="btn btn-ghost btn-sm hidden" id="editModeBtn" type="button">Edit</button>
        <button class="btn btn-primary btn-sm hidden" id="saveDraftBtn" type="button">Save Draft</button>
        <button class="btn btn-secondary btn-sm hidden" id="publishBtn" type="button">Publish</button>
        <button class="btn btn-ghost btn-sm hidden" id="unpublishBtn" type="button">Unpublish</button>
        <a class="btn btn-ghost btn-sm" id="backToModules" href="./modules.html">← Back to Modules</a>
      </div>
    </div>

    <div id="editorWrap" class="hidden" style="margin-bottom:12px">
      <div class="k-card" style="padding:12px;display:flex;gap:6px;flex-wrap:wrap">
        <button class="btn btn-ghost btn-sm" data-cmd="formatBlock" data-cmd-value="h1" type="button">H1</button>
        <button class="btn btn-ghost btn-sm" data-cmd="formatBlock" data-cmd-value="h2" type="button">H2</button>
        <button class="btn btn-ghost btn-sm" data-cmd="formatBlock" data-cmd-value="h3" type="button">H3</button>
        <button class="btn btn-ghost btn-sm" data-cmd="bold" type="button">Bold</button>
        <button class="btn btn-ghost btn-sm" data-cmd="italic" type="button">Italic</button>
        <button class="btn btn-ghost btn-sm" data-cmd="underline" type="button">Underline</button>
        <button class="btn btn-ghost btn-sm" data-cmd="insertUnorderedList" type="button">• List</button>
        <button class="btn btn-ghost btn-sm" data-cmd="insertOrderedList" type="button">1. List</button>
        <button class="btn btn-ghost btn-sm" id="addLinkBtn" type="button">Link</button>
        <button class="btn btn-ghost btn-sm" id="addPdfBtn" type="button">Insert PDF</button>
        <button class="btn btn-ghost btn-sm" id="addVideoBtn" type="button">Embed Video</button>
        <button class="btn btn-ghost btn-sm" id="copyMarkdownBtn" type="button">Copy Markdown</button>
      </div>
      <div id="lessonEditor" contenteditable="false" role="textbox" aria-multiline="true" aria-label="Lesson editor" class="k-card" style="min-height:280px;padding:16px;outline:none;position:relative;z-index:1;pointer-events:auto"></div>
    </div>

    <article id="lessonContent" class="k-card" style="padding:24px"></article>

    <pre id="lessonDebug" class="k-card hidden" style="padding:12px;margin-top:12px;white-space:pre-wrap"></pre>
  </div>

  <dialog id="resourceModal" class="k-modal">
    <form method="dialog" id="resourceModalForm" class="k-modal__card" style="min-width: min(560px, 95vw);">
      <header class="k-modal__header">
        <h3 id="resourceModalTitle">Insert Resource</h3>
      </header>
      <div class="k-modal__body" style="display:grid;gap:10px">
        <input id="resourceTitle" type="text" placeholder="Resource title" required />
        <input id="resourceUrl" type="url" placeholder="https://..." required />
      </div>
      <footer class="k-modal__footer" style="display:flex;justify-content:flex-end;gap:8px">
        <button type="button" id="resourceModalCancel" class="btn btn-ghost btn-sm">Cancel</button>
        <button type="submit" class="btn btn-primary btn-sm" id="resourceModalSubmit">Insert</button>
      </footer>
    </form>
  </dialog>

  <script src="./js/theme.js"></script>
  <script src="./js/lms-core.js"></script>
  <script src="./js/lesson.js"></script>
</body>
</html>
